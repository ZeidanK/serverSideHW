
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Management</title>
    <!-- Include jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, textarea {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 10px;
        }
        #response {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Add New Movie (Simplified)</h1>
    
    <form id="movieForm">
        <div class="form-group">
            <label for="id">ID:</label>
            <input type="number" id="id" name="id" required>
        </div>
        
        <div class="form-group">
            <label for="primaryTitle">Primary Title:</label>
            <input type="text" id="primaryTitle" name="primaryTitle" required>
        </div>
        
        <button type="button" id="submitBtn">Add Movie</button>
    </form>
    
    <div>
        <h2>Server Response:</h2>
        <div id="response">No response yet</div>
    </div>
    
    <script>
        // The AJAX call function as specified
        function ajaxCall(method, api, data, successCB, errorCB) {
            $.ajax({
                type: method, // Get/Post/Put/Delete/Patch
                url: api, // routing to the server
                data: data, // the data we pass in the body (if any…)
                cache: false, // allow caching
                contentType: "application/json", // the data format we expect back
                dataType: "json", // the data format that we send 
                //crossDomain: true, 
                success: successCB, // the success callback function
                error: errorCB // the error callback function
            });
        }
        
        // Add event listener to the submit button
        $(document).ready(function() {
            $("#submitBtn").click(function() {
                // Get only ID and title values from form
                const id = parseInt($("#id").val());
                const title = $("#primaryTitle").val();
                
                // Create movie data with default values for all other fields
                const movieData = {
                    id: id,
                    url: "string",
                    primaryTitle: title,
                    description: "string",
                    primaryImage: "string",
                    year: 0,
                    releaseDate: "2025-04-07T18:32:37.080Z",
                    language: "string",
                    budget: 0,
                    grossWorldwide: 0,
                    genres: "string",
                    isAdult: true,
                    runtimeMinutes: 0,
                    averageRating: 0,
                    numVotes: 0
                };
                
                // Success callback function
                function onSuccess(data) {
                    $("#response").text("Success! Movie added.\n" + JSON.stringify(data, null, 2));
                }
                
                // Error callback function
                function onError(xhr, status, error) {
                    $("#response").text("Error: " + status + "\n" + error + "\n" + xhr.responseText);
                }
                
                // Call the AJAX function
                ajaxCall(
                    "POST", 
                    "https://localhost:7026/api/movies", 
                    JSON.stringify(movieData), 
                    onSuccess, 
                    onError
                );
            });
        });
    </script>
</body>
</html>